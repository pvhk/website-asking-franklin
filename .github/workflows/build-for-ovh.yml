name: Build pour OVH

on:
  # D√©clencher manuellement depuis l'interface GitHub
  workflow_dispatch:

  # D√©clencher sur push vers main (optionnel)
  push:
    branches: [ main, master ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout du code
        uses: actions/checkout@v4

      - name: Installer Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: Installer les d√©pendances
        run: npm ci

      - name: Builder le projet Astro
        run: npm run build

      - name: Cr√©er l'archive ZIP pour OVH
        run: |
          cd dist
          zip -r ../askingfranklin-ovh.zip .
          cd ..
          ls -lh askingfranklin-ovh.zip

      - name: Upload de l'archive comme artifact
        uses: actions/upload-artifact@v4
        with:
          name: askingfranklin-ovh
          path: askingfranklin-ovh.zip
          retention-days: 30

      - name: Afficher les instructions
        run: |
          echo "‚úÖ Build termin√© avec succ√®s !"
          echo ""
          echo "üì• Pour t√©l√©charger l'archive :"
          echo "1. Allez sur l'onglet 'Actions' de votre repository GitHub"
          echo "2. Cliquez sur ce workflow 'Build pour OVH'"
          echo "3. T√©l√©chargez l'artifact 'askingfranklin-ovh'"
          echo ""
          echo "üì§ Ensuite, uploadez le contenu de l'archive sur votre serveur OVH"
